---
// layout import
import SectionLayout from "../../layouts/SectionLayout.astro";

// component imports
import PortfolioImage from "./PortfolioImage.astro";
import PortfolioContent from "./PortfolioContent.astro";
import { getCollection } from "astro:content";


const {
    id="portfolio",
    sectionTitle="Portfolio",
    sectionSubtitle="Mes r√©alisations",
    background="bg-colored"
} = Astro.props;

const allProjects = await getCollection('portfolio');
---


<SectionLayout {id} {sectionTitle} {sectionSubtitle} {background}>
    <div class="portfolio__container container grid">
        <div class="portfolio__images">
            {
                allProjects.map((project, i) => (
                    <PortfolioImage images={project.data.images} index={i} />
                ))
            }
        </div>
        <div class="portfolio__information">
            {
                allProjects.map((project, i) => (
                    <PortfolioContent
                        title={project.data.title}
                        techs={project.data.techs}
                        text={project.body}
                        index={i}
                    />
                ))
            }
        </div>
    </div>
</SectionLayout>

<style>
    /*==================== MEDIA QUERIES ====================*/
    /* For large devices */
    @media screen and (min-width: 768px) {
        .portfolio__container {
            grid-template-columns: 50% 1fr;
        }

        .portfolio__images {
            align-self: center;
        }
    }
</style>

<script src="../../scripts/portfolio-show-hide.js"></script>
